(()=>{var e={34:(e,t,n)=>{n(244),e.exports=e=>{const t=e.p1.gameboard,n=e.p2.gameboard,r=document.querySelector("#board-container"),a=document.querySelector("#status-msg"),s=document.querySelectorAll(".ship"),o=document.querySelector("#start-game"),i=document.querySelector("#game-mode"),c=document.querySelector("#pvp-btn"),l=document.querySelector("#pvc-btn"),d=document.querySelector("#next-player-btn");let p=!1,u=1;s.forEach(e=>{e.addEventListener("dragstart",t=>{t.dataTransfer.setData("length",e.dataset.length),t.dataTransfer.setData("orientation","hori"),t.dataTransfer.setData("index",e.dataset.index)})});const h=()=>{"comp"===e.p1.type&&t.randomlyPlaceShips([2,3,3,4,5]),"comp"===e.p2.type&&n.randomlyPlaceShips([2,3,3,4,5]),v(),f(),"human"===e.p1.type&&"human"===e.p2.type?a.innerHTML=1===u?"Player 1: Place your ships!":"Player 2: Place your ships!":a.innerHTML="Place your ships!"};document.querySelector("#random-ship").addEventListener("click",()=>{m()});const m=()=>{t.ships=[];for(let e=0;e<t.size;e++)for(let n=0;n<t.size;n++)t.board[e][n].occupied=!1,t.board[e][n].hit=!1;n.ships=[];for(let e=0;e<n.size;e++)for(let t=0;t<n.size;t++)n.board[e][t].occupied=!1,n.board[e][t].hit=!1;t.randomlyPlaceShips([2,3,3,4,5]),n.randomlyPlaceShips([2,3,3,4,5]),v(),p=!0,f(),a.innerHTML="Randomly placed boards, game started!"},y=()=>{const r=5===t.ships.length,a=5===n.ships.length;return"human"===e.p1.type&&"human"===e.p2.type?r&&a:"human"===e.p1.type&&"comp"===e.p2.type?r:"comp"!==e.p1.type||"human"!==e.p2.type||a};d.addEventListener("click",()=>{u=2,s.forEach(e=>{e.draggable=!0,e.classList.remove("placed")}),h(),f()});const f=()=>{o&&("human"!==e.p1.type||"human"!==e.p2.type||p?(o.disabled=!y(),o.disabled?a.innerHTML="Place all ships before starting.":a.innerHTML="Ready to start!"):1===u&&5===t.ships.length?(o.disabled=!0,a.innerHTML="Player 1's ships are done, pass to Player 2 and click 'Swap to next player'",d.style.display="block"):2===u&&5===n.ships.length?(o.disabled=!1,a.innerHTML="Ready to start!",d.style.display="none"):(o.disabled=!0,d.style.display="none"))};o&&o.addEventListener("click",()=>{y()?(a.innerHTML="Game started!",o.disabled=!0,p=!0):a.innerHTML="Place all ships first!"});const v=()=>{r.innerHTML="",b(t),b(n)},b=o=>{const i=o===t?1:2,c=document.createElement("div");c.classList.add(`board-${i}`),r.appendChild(c),"human"===e.p1.type&&"human"===e.p2.type&&!p&&(1===u&&o===t||2===u&&o===n)&&c.classList.add("active-setup-board");for(let r=0;r<o.size;r++){const i=document.createElement("div");i.classList.add("board-row");for(let c=0;c<o.size;c++){const l=document.createElement("div");l.classList.add("board-cell"),i.appendChild(l),x(o.board[r][c],l);const d=e.currPlayer===e.p1?n:t;o===d&&l.addEventListener("click",()=>g(o,r,c,l)),"human"===e.p1.type&&"human"===e.p2.type&&!p&&(1===u&&o===t||2===u&&o===n)&&(l.addEventListener("dragover",e=>{e.preventDefault()}),l.addEventListener("drop",e=>{e.preventDefault();const t=parseInt(e.dataTransfer.getData("length")),n=e.dataTransfer.getData("orientation"),a=parseInt(e.dataTransfer.getData("index")),i=s[a];i.draggable&&o.placeShip(r,c,n,t)&&(i.draggable=!1,i.classList.add("placed"),v(),f())})),a.innerHTML=e.currPlayer===e.p1?"Player 1's turn":"Player 2's turn"}c.appendChild(i)}},g=(r,s,o,i)=>{if(p){if(!e.winner){if(a.innerHTML="",r!==(e.currPlayer===e.p1?n:t))return a.innerHTML="Can't attack your own board",void console.log(a.innerHTML);e.turn(s,o,L)}}else a.innerHTML="Game not started."},L=t=>{v();const n=document.querySelector(".board-1"),r=document.querySelector(".board-2");if(n.classList.remove("active-board","inactive-board"),r.classList.remove("active-board","inactive-board"),t.currentPlayer===e.p1?(n.classList.add("active-board"),r.classList.add("inactive-board")):(r.classList.add("active-board"),n.classList.add("inactive-board")),"alr_atk"===t.status)return a.innerHTML="Invalid, retry",void console.log(a.innerHTML);t.gameOver&&(t.winner===e.p1?(a.innerHTML="Player 1 wins! Reload page to play again.",console.log(a.innerHTML)):(a.innerHTML="Player 2 wins! Reload page to play again.",console.log(a.innerHTML)))},x=(e,t)=>{t.classList.remove("hit","miss","not-yet","nothing"),e.occupied&&e.hit?t.classList.toggle("hit"):e.occupied&&!e.hit?t.classList.toggle("not-yet"):!e.occupied&&e.hit?t.classList.toggle("miss"):t.classList.toggle("nothing")},M=t=>{"pvp"===t?(e.p1.type="human",e.p2.type="human"):(e.p1.type="human",e.p2.type="comp"),i.setAttribute("hidden","true"),h(),f()};c.addEventListener("click",()=>M("pvp")),l.addEventListener("click",()=>M("pvc"))}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],d=s[l]||0,p="".concat(l," ").concat(d);s[l]=d+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var m=a(h,r);r.byIndex=i,t.splice(i,0,{identifier:p,updater:m,references:1})}o.push(p)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var i=n(s[o]);t[i].references--}for(var c=r(e,a),l=0;l<s.length;l++){var d=n(s[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},211:(e,t,n)=>{const r=n(906);e.exports=class{constructor(e="human"){this.type=e,this.gameboard=new r(10),"comp"==this.type&&(this.checkNext=[])}makeMove(e){if("human"===this.type)return null;let t,n;if(this.checkNext.length>0)[t,n]=this.checkNext.pop();else for(;t=Math.floor(Math.random()*e.size),n=Math.floor(Math.random()*e.size),e.board[t][n].hit;);return[t,n]}}},244:(e,t,n)=>{n(211),n(906),e.exports=class{constructor(e,t){this.p1=e,this.p2=t,this.currPlayer=e,this.winner=null,this.gameOver=!1}start(){}turn(e=null,t=null,n=null){const r=this.currPlayer===this.p1?this.p2:this.p1;if("comp"===this.currPlayer.type){const[n,a]=this.currPlayer.makeMove(r.gameboard);e=n,t=a}const a=r.gameboard.receiveAttack(e,t);console.log(`Move played by ${this.currPlayer===this.p1?"p1":"p2"} at ${e}, ${t}`);let s={row:e,col:t,status:a,gameOver:!1,winner:null,currentPlayer:this.currPlayer};if("alr_atk"===a)return n&&n(s),s;if("hit"==a&&"comp"===this.currPlayer.type){const n=[[1,0],[-1,0],[0,1],[0,-1]];for(const[a,s]of n){const n=e+a,o=t+s;n>=0&&o>=0&&n<r.gameboard.size&&o<r.gameboard.size&&!r.gameboard.board[n][o].hit&&this.currPlayer.checkNext.push([n,o])}}return r.gameboard.allShipsSunk()?(this.winner=this.currPlayer,s.gameOver=!0,s.winner=this.currPlayer):this.currPlayer=this.currPlayer===this.p1?this.p2:this.p1,n&&n(s),s.gameOver||"comp"!==this.currPlayer.type||setTimeout(()=>this.turn(null,null,n),900),s}}},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},365:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(601),a=n.n(r),s=n(314),o=n.n(s)()(a());o.push([e.id,"body {\n    background-color: azure;\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n}\n\n#board-container {\n    border: 2px solid black;\n    margin: 100px;\n    display: flex;\n    justify-content: space-between;\n}\n\n.board-row {\n    border: 2px solid black;\n    height: 30px;\n    width: 300px;\n    display: flex;\n}\n\n.board-cell {\n    border: 2px solid black;\n    width: 30px;\n    height: 30px;\n}\n\n.hit {\n    background-color: red;\n}\n\n.miss {\n    background-color: aquamarine;\n}\n\n/* comment this out whenever we want to hide the ship positions */\n.not-yet {      \n    background-color: greenyellow;\n}\n\n#status-msg {\n    border: 2px solid black;\n    height: 2em;\n    font-size: 2em;\n}\n\n#random-ship{\n    font-size: 1.2em;\n    padding: 0.5em 1em;\n}\n\n.active-board {\n    opacity: 1;\n}\n  \n.inactive-board {\n    opacity: 0.3; \n}\n\n#ships-container{\n    display: flex;\n    justify-content: space-evenly;\n}\n  \n.ship{\n    border: 2px solid green;\n    background-color: darkcyan;\n    font-size: 1.2rem;\n    width: 5rem;\n}\n\n.ship.placed{\n    opacity: 0.5;\n}\n\n#game-mode{\n    border: 2px solid black;\n}\n\n.active-setup-board {\n    border: 5px solid blue;\n}\n\n.modal[hidden]{\n    display: none;\n}",""]);const i=o},432:e=>{e.exports=class{constructor(e,t=0){this.length=e,this.hits=t}isSunk(){return this.length===this.hits}gotHit(){this.hits+=1}}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},610:e=>{e.exports=class{constructor(){this.occupied=null,this.hit=!1}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},906:(e,t,n)=>{const r=n(432),a=n(610);e.exports=class{constructor(e){const t=[];for(let n=0;n<e;n++){const n=[];for(let t=0;t<e;t++){const e=new a;n.push(e)}t.push(n)}this.board=t,this.size=e,this.ships=[]}validPos(e,t){return e>=0&&e<this.size&&t>=0&&t<this.size&&!this.board[e][t].occupied}randomlyPlaceShips(e){const t=["hori","vert"];for(let n of e)for(;;){const e=Math.floor(Math.random()*this.size),r=Math.floor(Math.random()*this.size),a=t[Math.floor(Math.random()*t.length)];if(this.placeShip(e,r,a,n))break}}placeShip(e,t,n,a){if("hori"===n){for(let n=0;n<a;n++)if(!this.validPos(e,t+n))return!1}else if("vert"===n)for(let n=0;n<a;n++)if(!this.validPos(e+n,t))return!1;const s=new r(a);if("hori"===n)for(let n=0;n<a;n++)this.board[e][t+n].occupied=s;else if("vert"===n)for(let n=0;n<a;n++)this.board[e+n][t].occupied=s;return this.ships.push(s),!0}receiveAttack(e,t){const n=this.board[e][t];if(n.hit)return"alr_atk";if(n.hit=!0,n.occupied){let e=n.occupied;return e.gotHit(),e.isSunk()?"sunk":"hit"}return"miss"}allShipsSunk(){for(let e of this.ships)if(!e.isSunk())return!1;return!0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(72),t=n.n(e),r=n(825),a=n.n(r),s=n(659),o=n.n(s),i=n(56),c=n.n(i),l=n(540),d=n.n(l),p=n(113),u=n.n(p),h=n(365),m={};m.styleTagTransform=u(),m.setAttributes=c(),m.insert=o().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=d(),t()(h.A,m),h.A&&h.A.locals&&h.A.locals;const y=n(34),f=n(244),v=n(211);document.addEventListener("DOMContentLoaded",()=>{const e=new v("human"),t=new v("human"),n=new f(e,t);y(n)})})()})();